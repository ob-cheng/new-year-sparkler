(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(e){if(e.ep)return;e.ep=!0;const i=s(e);fetch(e.href,i)}})();class O{constructor(t,s,o,e,i,h,p){this.reset(t,s,o,e,i,h,p)}reset(t,s,o,e,i,h,p){this.x=t,this.y=s,this.vx=o,this.vy=e,this.color=i,this.size=h*2,this.life=p*2,this.maxLife=this.life,this.decay=Math.random()*.01+.005,this.gravity=.15,this.friction=.98}update(){this.vx*=this.friction,this.vy*=this.friction,this.vy+=this.gravity,this.x+=this.vx,this.y+=this.vy,this.life-=this.decay}draw(t){if(this.life<=0)return;const s=Math.max(0,this.life/this.maxLife);t.save(),t.globalAlpha=s,t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fill(),t.restore()}}class E{constructor(t,s){this.x=t,this.y=s,this.length=150,this.handleLength=50,this.burnRate=.3,this.burntLength=0,this.isLit=!1,this.thickness=4,this.angle=0,this.prevX=t,this.prevY=s,this.sparks=[],this.pool=[];for(let o=0;o<1e3;o++)this.pool.push(new O(0,0,0,0,"#000",0,0))}ignite(){this.isLit=!0}update(t,s){this.prevX=this.x,this.prevY=this.y,this.x=t,this.y=s;const o=this.x-this.prevX,e=this.y-this.prevY;if(this.isLit&&this.burntLength<this.length?this.burntLength+=this.burnRate:this.burntLength>=this.length&&(this.isLit=!1),this.isLit){const i=this.x,h=this.y-this.handleLength-this.length+this.burntLength,p=Math.floor(Math.random()*10)+5;for(let y=0;y<p;y++)if(this.pool.length>0){const m=Math.random()*4+1,v=Math.random()*Math.PI*2,S=Math.cos(v)*m+o*.2,M=Math.sin(v)*m+e*.2,C=`hsl(${40+Math.random()*20}, 100%, 80%)`,P=Math.random()*2+.5,T=Math.random()*1.5+.5,L=this.pool.pop();L.reset(i,h,S,M,C,P,T),this.sparks.push(L)}}for(let i=this.sparks.length-1;i>=0;i--){const h=this.sparks[i];if(h.update(),h.life<=0){this.pool.push(h);const p=this.sparks[this.sparks.length-1];this.sparks[i]=p,this.sparks.pop()}}}drawStick(t){t.lineWidth=this.thickness,t.lineCap="round";const s=this.y-this.handleLength,o=s-this.length;if(t.strokeStyle="#555",t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x,s),t.stroke(),t.strokeStyle="#333",t.beginPath(),t.moveTo(this.x,s),t.lineTo(this.x,o),t.stroke(),this.burntLength<this.length&&(t.strokeStyle="#777",t.lineWidth=this.thickness+2,t.beginPath(),t.moveTo(this.x,o+this.burntLength),t.lineTo(this.x,s),t.stroke()),this.isLit){const e=o+this.burntLength;t.fillStyle="#ff4400",t.beginPath(),t.arc(this.x,e,4,0,Math.PI*2),t.fill(),t.shadowColor="#ffaa00",t.shadowBlur=20,t.fill(),t.shadowBlur=0}}drawSparks(t){t.globalCompositeOperation="lighter",this.sparks.forEach(s=>s.draw(t)),t.globalCompositeOperation="source-over"}}const f=document.createElement("canvas");f.id="canvas-stick";document.body.appendChild(f);const g=document.createElement("canvas");g.id="canvas-sparks";document.body.appendChild(g);const c=f.getContext("2d"),u=g.getContext("2d");let l,d;function k(){l=window.innerWidth,d=window.innerHeight,f.width=l,f.height=d,g.width=l,g.height=d}window.addEventListener("resize",k);k();const a={x:l/2,y:d*.8},n=new E(a.x,a.y);window.addEventListener("mousemove",r=>{a.x=r.clientX,a.y=r.clientY});window.addEventListener("touchmove",r=>{r.preventDefault(),a.x=r.touches[0].clientX,a.y=r.touches[0].clientY},{passive:!1});function w(){n.isLit||(n.burntLength>=n.length-1?Y():n.ignite())}window.addEventListener("mousedown",w);window.addEventListener("touchstart",r=>{w()},{passive:!1});function b(){requestAnimationFrame(b),c.clearRect(0,0,l,d),u.fillStyle="rgba(0, 0, 0, 0.2)",u.globalCompositeOperation="destination-out",u.fillRect(0,0,l,d),u.globalCompositeOperation="source-over",n.update(a.x,a.y),n.drawStick(c),n.drawSparks(u),c.fillStyle="rgba(255, 255, 255, 1.0)",c.font="30px Arial",c.textAlign="center",!n.isLit&&n.burntLength===0?c.fillText("Touch / Click to Ignite",l/2,d/2):!n.isLit&&n.burntLength>=n.length-1&&c.fillText("Touch / Click to New Sparkler",l/2,d/2)}function Y(){for(n.burntLength=0,n.isLit=!0;n.sparks.length>0;)n.pool.push(n.sparks.pop());n.x=a.x,n.y=a.y,u.clearRect(0,0,l,d)}b();
