(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))c(v);new MutationObserver(v=>{for(const y of v)if(y.type==="childList")for(const L of y.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&c(L)}).observe(document,{childList:!0,subtree:!0});function d(v){const y={};return v.integrity&&(y.integrity=v.integrity),v.referrerPolicy&&(y.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?y.credentials="include":v.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function c(v){if(v.ep)return;v.ep=!0;const y=d(v);fetch(v.href,y)}})();class Dr{constructor(u,d,c,v,y,L){this.reset(u,d,c,v,y,L)}reset(u,d,c,v,y,L){this.x=u,this.y=d,this.prevX=u,this.prevY=d,this.vx=c,this.vy=v,this.size=y,this.life=L,this.maxLife=L,this.decay=Math.random()*.01+.015,this.gravity=.1,this.friction=.95}update(){this.prevX=this.x,this.prevY=this.y,this.vx+=(Math.random()-.5)*.5,this.vy+=(Math.random()-.5)*.5,this.vx*=this.friction,this.vy*=this.friction,this.vy+=this.gravity,this.x+=this.vx,this.y+=this.vy,this.life-=this.decay}draw(u){if(this.life<=0)return;const d=this.life/this.maxLife;let c,v,y,L;d>.8?(c=255,v=255,y=Math.floor(255*(d-.8)*5),L=1):d>.4?(c=255,v=Math.floor(200+55*((d-.4)*2.5)),y=50,L=1):(c=255,v=Math.floor(100*(d*2.5)),y=0,L=d*2.5);const O=`rgba(${c}, ${v}, ${y}, ${L})`;u.save(),u.lineCap="round",u.strokeStyle=O,u.fillStyle=O,Math.sqrt(this.vx*this.vx+this.vy*this.vy)>2?(u.lineWidth=this.size,u.beginPath(),u.moveTo(this.prevX,this.prevY),u.lineTo(this.x,this.y),u.stroke()):(u.beginPath(),u.arc(this.x,this.y,this.size,0,Math.PI*2),u.fill()),u.restore()}}class Br{constructor(u,d){this.x=u,this.y=d,this.length=150,this.handleLength=50,this.burnRate=.25,this.burntLength=0,this.isLit=!1,this.thickness=4,this.angle=-10*(Math.PI/180),this.baseAngle=-10*(Math.PI/180),this.prevX=u,this.prevY=d,this.state="IDLE",this.vy=0,this.vr=0,this.handImg=new Image,this.handImg.src="/hand.png",this.useGhostHand=!0,this.sparks=[],this.pool=[];for(let c=0;c<1e3;c++)this.pool.push(new Dr(0,0,0,0,0,0))}ignite(){this.isLit=!0}drop(){this.state="DROPPING",this.vy=-10,this.vx=(Math.random()-.5)*10,this.vr=(Math.random()-.5)*.4}pickup(u,d,c,v){for(this.state="PICKING_UP",this.x=u,this.y=d,this.targetX=c,this.targetY=v,this.pickupProgress=0,this.burntLength=0,this.isLit=!1,this.angle=this.baseAngle;this.sparks.length>0;)this.pool.push(this.sparks.pop())}update(u,d){if(this.prevX=this.x,this.prevY=this.y,this.state==="DROPPING")this.vy+=.5,this.y+=this.vy,this.x+=this.vx,this.angle+=this.vr;else if(this.state==="PICKING_UP"){this.pickupProgress+=.05,this.pickupProgress>=1&&(this.state="IDLE",this.pickupProgress=1);const y=1-Math.pow(1-this.pickupProgress,3);this.x=this.x+(u-this.x)*.1,this.y=window.innerHeight+(d-window.innerHeight)*y}else this.x=u,this.y=d;const c=this.x-this.prevX,v=this.y-this.prevY;if(this.state!=="DROPPING"&&this.state!=="PICKING_UP"){let O=this.baseAngle-c*.02;O<-.8&&(O=-.8),O>.8&&(O=.8),this.angle+=(O-this.angle)*.1}if(this.isLit&&this.burntLength<this.length?this.burntLength+=this.burnRate:this.burntLength>=this.length&&(this.isLit=!1),this.isLit){const y=-this.handleLength-this.length+this.burntLength,L=this.x-y*Math.sin(this.angle),O=this.y+y*Math.cos(this.angle);let U=Math.floor(Math.random()*5);Math.random()<.1&&(U=20+Math.floor(Math.random()*20));for(let W=0;W<U;W++)if(this.pool.length>0){const mt=Math.random()*6+2,ft=Math.random()*Math.PI*2,it=Math.cos(ft)*mt+c*.4,ot=Math.sin(ft)*mt+v*.4,wt=Math.random()*2+1,J=Math.random()*1+.3,q=this.pool.pop();q.reset(L,O,it,ot,wt,J),this.sparks.push(q)}}for(let y=this.sparks.length-1;y>=0;y--){const L=this.sparks[y];if(L.update(),L.life<=0){this.pool.push(L);const O=this.sparks[this.sparks.length-1];this.sparks[y]=O,this.sparks.pop()}}}drawStick(u){if(u.save(),u.translate(this.x,this.y),u.rotate(this.angle),this.useGhostHand&&this.handImg.complete&&this.handImg.naturalWidth>0&&this.state!=="DROPPING"){u.save(),u.globalAlpha=.5;const v=.3,y=this.handImg.width*v,L=this.handImg.height*v;u.drawImage(this.handImg,-y/2,-L/2-25,y,L),u.restore()}u.lineCap="round";const d=-this.handleLength,c=d-this.length;if(this.wireGrad||(this.wireGrad=u.createLinearGradient(-2,0,2,0),this.wireGrad.addColorStop(0,"#555"),this.wireGrad.addColorStop(.4,"#aaa"),this.wireGrad.addColorStop(1,"#444")),u.strokeStyle=this.wireGrad,u.lineWidth=this.thickness,u.beginPath(),u.moveTo(0,0),u.lineTo(0,c),u.stroke(),this.burntLength<this.length&&(this.fuelGrad||(this.fuelGrad=u.createLinearGradient(-3,0,3,0),this.fuelGrad.addColorStop(0,"#333"),this.fuelGrad.addColorStop(.3,"#555"),this.fuelGrad.addColorStop(.5,"#444"),this.fuelGrad.addColorStop(1,"#222")),u.strokeStyle=this.fuelGrad,u.lineWidth=this.thickness+3,u.beginPath(),u.moveTo(0,c+this.burntLength),u.lineTo(0,d),u.stroke()),this.isLit){const v=c+this.burntLength;u.shadowBlur=0,u.fillStyle="#ffffff",u.beginPath(),u.arc(0,v,3,0,Math.PI*2),u.fill(),u.shadowColor="#ff6600",u.shadowBlur=15,u.fillStyle="rgba(255, 200, 0, 0.8)",u.beginPath(),u.arc(0,v,6,0,Math.PI*2),u.fill(),u.shadowBlur=0}u.restore()}drawSparks(u){u.globalCompositeOperation="lighter",this.sparks.forEach(d=>d.draw(u)),u.globalCompositeOperation="source-over"}}class Hr{constructor(u,d){this.flakes=[],this.width=u,this.height=d,this.count=150,this.active=!1;for(let c=0;c<this.count;c++)this.flakes.push(this.createFlake(!0))}createFlake(u=!1){return{x:Math.random()*this.width,y:u?Math.random()*this.height:-10,vy:Math.random()*1.5+.5,radius:Math.random()*2+.5,opacity:Math.random()*.5+.3,swayOffset:Math.random()*100,swaySpeed:Math.random()*.02+.01}}resize(u,d){this.width=u,this.height=d}update(){this.active&&this.flakes.forEach(u=>{u.y+=u.vy,u.x+=Math.sin((u.y+u.swayOffset)*u.swaySpeed)*.5,u.y>this.height&&Object.assign(u,this.createFlake(!1)),u.x>this.width&&(u.x=0),u.x<0&&(u.x=this.width)})}draw(u){this.active&&(u.fillStyle="white",u.beginPath(),this.flakes.forEach(d=>{u.moveTo(d.x+d.radius,d.y),u.arc(d.x,d.y,d.radius,0,Math.PI*2)}),u.fill())}}var ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fe={},Wn;function Wr(){return Wn||(Wn=1,(function(){var b;function u(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var d=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};function c(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof ce=="object"&&ce];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var v=c(this);function y(t,e){if(e)t:{var n=v;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];if(!(i in n))break t;n=n[i]}t=t[t.length-1],r=n[t],e=e(r),e!=r&&e!=null&&d(n,t,{configurable:!0,writable:!0,value:e})}}y("Symbol",function(t){function e(s){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new n(r+(s||"")+"_"+i++,s)}function n(s,o){this.h=s,d(this,"description",{configurable:!0,writable:!0,value:o})}if(t)return t;n.prototype.toString=function(){return this.h};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return e}),y("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<e.length;n++){var r=v[e[n]];typeof r=="function"&&typeof r.prototype[t]!="function"&&d(r.prototype,t,{configurable:!0,writable:!0,value:function(){return L(u(this))}})}return t});function L(t){return t={next:t},t[Symbol.iterator]=function(){return this},t}function O(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:u(t)}}function U(t){if(!(t instanceof Array)){t=O(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}var W=typeof Object.assign=="function"?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};y("Object.assign",function(t){return t||W});var mt=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},ft;if(typeof Object.setPrototypeOf=="function")ft=Object.setPrototypeOf;else{var it;t:{var ot={a:!0},wt={};try{wt.__proto__=ot,it=wt.a;break t}catch{}it=!1}ft=it?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var J=ft;function q(t,e){if(t.prototype=mt(e.prototype),t.prototype.constructor=t,J)J(t,e);else for(var n in e)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.ya=e.prototype}function jt(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function ct(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}jt.prototype.u=function(t){this.i=t};function V(t,e){t.l={ma:e,na:!0},t.h=t.s||t.v}jt.prototype.return=function(t){this.l={return:t},this.h=this.v};function _(t,e,n){return t.h=n,{value:e}}function Ft(t){this.h=new jt,this.i=t}function Rt(t,e){ct(t.h);var n=t.h.j;return n?st(t,"return"in n?n.return:function(r){return{value:r,done:!0}},e,t.h.return):(t.h.return(e),B(t))}function st(t,e,n,r){try{var i=e.call(t.h.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.h.m=!1,i;var s=i.value}catch(o){return t.h.j=null,V(t.h,o),B(t)}return t.h.j=null,r.call(t.h,s),B(t)}function B(t){for(;t.h.h;)try{var e=t.i(t.h);if(e)return t.h.m=!1,{value:e.value,done:!1}}catch(n){t.h.i=void 0,V(t.h,n)}if(t.h.m=!1,t.h.l){if(e=t.h.l,t.h.l=null,e.na)throw e.ma;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function tt(t){this.next=function(e){return ct(t.h),t.h.j?e=st(t,t.h.j.next,e,t.h.u):(t.h.u(e),e=B(t)),e},this.throw=function(e){return ct(t.h),t.h.j?e=st(t,t.h.j.throw,e,t.h.u):(V(t.h,e),e=B(t)),e},this.return=function(e){return Rt(t,e)},this[Symbol.iterator]=function(){return this}}function h(t){function e(r){return t.next(r)}function n(r){return t.throw(r)}return new Promise(function(r,i){function s(o){o.done?r(o.value):Promise.resolve(o.value).then(e,n).then(s,i)}s(t.next())})}function f(t){return h(new tt(new Ft(t)))}y("Promise",function(t){function e(o){this.i=0,this.j=void 0,this.h=[],this.u=!1;var a=this.l();try{o(a.resolve,a.reject)}catch(l){a.reject(l)}}function n(){this.h=null}function r(o){return o instanceof e?o:new e(function(a){a(o)})}if(t)return t;n.prototype.i=function(o){if(this.h==null){this.h=[];var a=this;this.j(function(){a.m()})}this.h.push(o)};var i=v.setTimeout;n.prototype.j=function(o){i(o,0)},n.prototype.m=function(){for(;this.h&&this.h.length;){var o=this.h;this.h=[];for(var a=0;a<o.length;++a){var l=o[a];o[a]=null;try{l()}catch(p){this.l(p)}}}this.h=null},n.prototype.l=function(o){this.j(function(){throw o})},e.prototype.l=function(){function o(p){return function(m){l||(l=!0,p.call(a,m))}}var a=this,l=!1;return{resolve:o(this.I),reject:o(this.m)}},e.prototype.I=function(o){if(o===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof e)this.L(o);else{t:switch(typeof o){case"object":var a=o!=null;break t;case"function":a=!0;break t;default:a=!1}a?this.F(o):this.s(o)}},e.prototype.F=function(o){var a=void 0;try{a=o.then}catch(l){this.m(l);return}typeof a=="function"?this.M(a,o):this.s(o)},e.prototype.m=function(o){this.v(2,o)},e.prototype.s=function(o){this.v(1,o)},e.prototype.v=function(o,a){if(this.i!=0)throw Error("Cannot settle("+o+", "+a+"): Promise already settled in state"+this.i);this.i=o,this.j=a,this.i===2&&this.K(),this.H()},e.prototype.K=function(){var o=this;i(function(){if(o.D()){var a=v.console;typeof a<"u"&&a.error(o.j)}},1)},e.prototype.D=function(){if(this.u)return!1;var o=v.CustomEvent,a=v.Event,l=v.dispatchEvent;return typeof l>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof a=="function"?o=new a("unhandledrejection",{cancelable:!0}):(o=v.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.j,l(o))},e.prototype.H=function(){if(this.h!=null){for(var o=0;o<this.h.length;++o)s.i(this.h[o]);this.h=null}};var s=new n;return e.prototype.L=function(o){var a=this.l();o.T(a.resolve,a.reject)},e.prototype.M=function(o,a){var l=this.l();try{o.call(a,l.resolve,l.reject)}catch(p){l.reject(p)}},e.prototype.then=function(o,a){function l(A,w){return typeof A=="function"?function(x){try{p(A(x))}catch(k){m(k)}}:w}var p,m,S=new e(function(A,w){p=A,m=w});return this.T(l(o,p),l(a,m)),S},e.prototype.catch=function(o){return this.then(void 0,o)},e.prototype.T=function(o,a){function l(){switch(p.i){case 1:o(p.j);break;case 2:a(p.j);break;default:throw Error("Unexpected state: "+p.i)}}var p=this;this.h==null?s.i(l):this.h.push(l),this.u=!0},e.resolve=r,e.reject=function(o){return new e(function(a,l){l(o)})},e.race=function(o){return new e(function(a,l){for(var p=O(o),m=p.next();!m.done;m=p.next())r(m.value).T(a,l)})},e.all=function(o){var a=O(o),l=a.next();return l.done?r([]):new e(function(p,m){function S(x){return function(k){A[x]=k,w--,w==0&&p(A)}}var A=[],w=0;do A.push(void 0),w++,r(l.value).T(S(A.length-1),m),l=a.next();while(!l.done)})},e});function E(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var s=n++;return{value:e(s,t[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}y("Array.prototype.keys",function(t){return t||function(){return E(this,function(e){return e})}}),y("Array.prototype.fill",function(t){return t||function(e,n,r){var i=this.length||0;for(0>n&&(n=Math.max(0,i+n)),(r==null||r>i)&&(r=i),r=Number(r),0>r&&(r=Math.max(0,i+r)),n=Number(n||0);n<r;n++)this[n]=e;return this}});function j(t){return t||Array.prototype.fill}y("Int8Array.prototype.fill",j),y("Uint8Array.prototype.fill",j),y("Uint8ClampedArray.prototype.fill",j),y("Int16Array.prototype.fill",j),y("Uint16Array.prototype.fill",j),y("Int32Array.prototype.fill",j),y("Uint32Array.prototype.fill",j),y("Float32Array.prototype.fill",j),y("Float64Array.prototype.fill",j),y("Object.is",function(t){return t||function(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}}),y("Array.prototype.includes",function(t){return t||function(e,n){var r=this;r instanceof String&&(r=String(r));var i=r.length;for(n=n||0,0>n&&(n=Math.max(n+i,0));n<i;n++){var s=r[n];if(s===e||Object.is(s,e))return!0}return!1}}),y("String.prototype.includes",function(t){return t||function(e,n){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,n||0)!==-1}});var I=this||self;function G(t,e){t=t.split(".");var n=I;t[0]in n||typeof n.execScript>"u"||n.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)t.length||e===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=e}function g(t){var e;t:{if((e=I.navigator)&&(e=e.userAgent))break t;e=""}return e.indexOf(t)!=-1}var T=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=typeof t=="string"?t.split(""):t,s=0;s<n;s++)s in i&&(r[s]=e.call(void 0,i[s],s,t));return r},P={},R=null;function Q(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):"=.".indexOf(t[e-1])!=-1&&(n="=.".indexOf(t[e-2])!=-1?n-2:n-1);var r=new Uint8Array(n),i=0;return Nt(t,function(s){r[i++]=s}),i!==n?r.subarray(0,i):r}function Nt(t,e){function n(l){for(;r<t.length;){var p=t.charAt(r++),m=R[p];if(m!=null)return m;if(!/^[\s\xa0]*$/.test(p))throw Error("Unknown base64 encoding at char: "+p)}return l}et();for(var r=0;;){var i=n(-1),s=n(0),o=n(64),a=n(64);if(a===64&&i===-1)break;e(i<<2|s>>4),o!=64&&(e(s<<4&240|o>>2),a!=64&&e(o<<6&192|a))}}function et(){if(!R){R={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));P[n]=r;for(var i=0;i<r.length;i++){var s=r[i];R[s]===void 0&&(R[s]=i)}}}}var ut=typeof Uint8Array<"u",Ct=!(g("Trident")||g("MSIE"))&&typeof I.btoa=="function";function Ot(t){if(!Ct){var e;e===void 0&&(e=0),et(),e=P[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,s=0;i<t.length-2;i+=3){var o=t[i],a=t[i+1],l=t[i+2],p=e[o>>2];o=e[(o&3)<<4|a>>4],a=e[(a&15)<<2|l>>6],l=e[l&63],n[s++]=p+o+a+l}switch(p=0,l=r,t.length-i){case 2:p=t[i+1],l=e[(p&15)<<2]||r;case 1:t=t[i],n[s]=e[t>>2]+e[(t&3)<<4|p>>4]+l+r}return n.join("")}for(e="";10240<t.length;)e+=String.fromCharCode.apply(null,t.subarray(0,10240)),t=t.subarray(10240);return e+=String.fromCharCode.apply(null,t),btoa(e)}var De=RegExp("[-_.]","g");function Zn(t){switch(t){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Be(t){if(!Ct)return Q(t);De.test(t)&&(t=t.replace(De,Zn)),t=atob(t);for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}var He;function pe(){return He||(He=new Uint8Array(0))}var Ut={},Qn=typeof Uint8Array.prototype.slice=="function",H=0,X=0;function We(t){var e=0>t;t=Math.abs(t);var n=t>>>0;t=Math.floor((t-n)/4294967296),e&&(n=O(ze(n,t)),e=n.next().value,t=n.next().value,n=e),H=n>>>0,X=t>>>0}var Jn=typeof BigInt=="function";function ze(t,e){return e=~e,t?t=~t+1:e+=1,[t,e]}function Ye(t,e){this.i=t>>>0,this.h=e>>>0}function Xe(t){if(!t)return Ve||(Ve=new Ye(0,0));if(!/^-?\d+$/.test(t))return null;if(16>t.length)We(Number(t));else if(Jn)t=BigInt(t),H=Number(t&BigInt(4294967295))>>>0,X=Number(t>>BigInt(32)&BigInt(4294967295));else{var e=+(t[0]==="-");X=H=0;for(var n=t.length,r=e,i=(n-e)%6+e;i<=n;r=i,i+=6)r=Number(t.slice(r,i)),X*=1e6,H=1e6*H+r,4294967296<=H&&(X+=H/4294967296|0,H%=4294967296);e&&(e=O(ze(H,X)),t=e.next().value,e=e.next().value,H=t,X=e)}return new Ye(H,X)}var Ve;function Ke(t,e){return Error("Invalid wire type: "+t+" (at position "+e+")")}function ve(){return Error("Failed to read varint, encoding is invalid.")}function $e(t,e){return Error("Tried to read past the end of the data "+e+" > "+t)}function Et(){throw Error("Invalid UTF8")}function Ze(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}var qt=void 0,ye,qn=typeof TextDecoder<"u",Qe,tr=typeof TextEncoder<"u",Je;function qe(t){if(t!==Ut)throw Error("illegal external caller")}function Gt(t,e){if(qe(e),this.V=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}function ge(){return Je||(Je=new Gt(null,Ut))}function tn(t){qe(Ut);var e=t.V;return e=e==null||ut&&e!=null&&e instanceof Uint8Array?e:typeof e=="string"?Be(e):null,e==null?e:t.V=e}function er(t){if(typeof t=="string")return{buffer:Be(t),C:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Uint8Array)return{buffer:t,C:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Gt)return{buffer:tn(t)||pe(),C:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function en(t,e){this.i=null,this.m=!1,this.h=this.j=this.l=0,me(this,t,e)}function me(t,e,n){n=n===void 0?{}:n,t.S=n.S===void 0?!1:n.S,e&&(e=er(e),t.i=e.buffer,t.m=e.C,t.l=0,t.j=t.i.length,t.h=t.l)}en.prototype.reset=function(){this.h=this.l};function Tt(t,e){if(t.h=e,e>t.j)throw $e(t.j,e)}function Dt(t){var e=t.i,n=t.h,r=e[n++],i=r&127;if(r&128&&(r=e[n++],i|=(r&127)<<7,r&128&&(r=e[n++],i|=(r&127)<<14,r&128&&(r=e[n++],i|=(r&127)<<21,r&128&&(r=e[n++],i|=r<<28,r&128&&e[n++]&128&&e[n++]&128&&e[n++]&128&&e[n++]&128&&e[n++]&128)))))throw ve();return Tt(t,n),i}function nn(t,e){if(0>e)throw Error("Tried to read a negative byte length: "+e);var n=t.h,r=n+e;if(r>t.j)throw $e(e,t.j-n);return t.h=r,n}var rn=[];function we(){this.h=[]}we.prototype.length=function(){return this.h.length},we.prototype.end=function(){var t=this.h;return this.h=[],t};function on(t,e,n){for(;0<n||127<e;)t.h.push(e&127|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.h.push(e)}function St(t,e){for(;127<e;)t.h.push(e&127|128),e>>>=7;t.h.push(e)}function be(t,e){if(rn.length){var n=rn.pop();me(n,t,e),t=n}else t=new en(t,e);this.h=t,this.j=this.h.h,this.i=this.l=-1,this.setOptions(e)}be.prototype.setOptions=function(t){t=t===void 0?{}:t,this.ca=t.ca===void 0?!1:t.ca},be.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function sn(t){var e=t.h;if(e.h==e.j)return!1;t.j=t.h.h;var n=Dt(t.h)>>>0;if(e=n>>>3,n&=7,!(0<=n&&5>=n))throw Ke(n,t.j);if(1>e)throw Error("Invalid field number: "+e+" (at position "+t.j+")");return t.l=e,t.i=n,!0}function te(t){switch(t.i){case 0:if(t.i!=0)te(t);else t:{t=t.h;for(var e=t.h,n=e+10,r=t.i;e<n;)if((r[e++]&128)===0){Tt(t,e);break t}throw ve()}break;case 1:t=t.h,Tt(t,t.h+8);break;case 2:t.i!=2?te(t):(e=Dt(t.h)>>>0,t=t.h,Tt(t,t.h+e));break;case 5:t=t.h,Tt(t,t.h+4);break;case 3:e=t.l;do{if(!sn(t))throw Error("Unmatched start-group tag: stream EOF");if(t.i==4){if(t.l!=e)throw Error("Unmatched end-group tag");break}te(t)}while(!0);break;default:throw Ke(t.i,t.j)}}var ee=[];function nr(){this.j=[],this.i=0,this.h=new we}function kt(t,e){e.length!==0&&(t.j.push(e),t.i+=e.length)}function rr(t,e){if(e=e.R){kt(t,t.h.end());for(var n=0;n<e.length;n++)kt(t,tn(e[n])||pe())}}var bt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function xt(t,e){return bt?t[bt]|=e:t.A!==void 0?t.A|=e:(Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}}),e)}function un(t,e){bt?t[bt]&&(t[bt]&=~e):t.A!==void 0&&(t.A&=~e)}function D(t){var e;return bt?e=t[bt]:e=t.A,e??0}function dt(t,e){bt?t[bt]=e:t.A!==void 0?t.A=e:Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}})}function Ae(t){return xt(t,1),t}function ir(t,e){dt(e,(t|0)&-51)}function ne(t,e){dt(e,(t|18)&-41)}var je={};function re(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.constructor===Object}var Bt,an=[];dt(an,23),Bt=Object.freeze(an);function Ee(t){if(D(t.o)&2)throw Error("Cannot mutate an immutable Message")}function Te(t){var e=t.length;(e=e?t[e-1]:void 0)&&re(e)?e.g=1:(e={},t.push((e.g=1,e)))}function ln(t){var e=t.i+t.G;return t.B||(t.B=t.o[e]={})}function at(t,e){return e===-1?null:e>=t.i?t.B?t.B[e]:void 0:t.o[e+t.G]}function pt(t,e,n,r){Ee(t),Ht(t,e,n,r)}function Ht(t,e,n,r){t.j&&(t.j=void 0),e>=t.i||r?ln(t)[e]=n:(t.o[e+t.G]=n,(t=t.B)&&e in t&&delete t[e])}function Se(t,e,n,r){var i=at(t,e);Array.isArray(i)||(i=Bt);var s=D(i);if(s&1||Ae(i),r)s&2||xt(i,2),n&1||Object.freeze(i);else{r=!(n&2);var o=s&2;n&1||!o?r&&s&16&&!o&&un(i,16):(i=Ae(Array.prototype.slice.call(i)),Ht(t,e,i))}return i}function xe(t,e){var n=at(t,e),r=n==null?n:typeof n=="number"||n==="NaN"||n==="Infinity"||n==="-Infinity"?Number(n):void 0;return r!=null&&r!==n&&Ht(t,e,r),r}function hn(t,e,n,r,i){t.h||(t.h={});var s=t.h[n],o=Se(t,n,3,i);if(!s){var a=o;s=[];var l=!!(D(t.o)&16);o=!!(D(a)&2);var p=a;!i&&o&&(a=Array.prototype.slice.call(a));for(var m=o,S=0;S<a.length;S++){var A=a[S],w=e,x=!1;if(x=x===void 0?!1:x,A=Array.isArray(A)?new w(A):x?new w:void 0,A!==void 0){w=A.o;var k=x=D(w);o&&(k|=2),l&&(k|=16),k!=x&&dt(w,k),w=k,m=m||!!(2&w),s.push(A)}}return t.h[n]=s,l=D(a),e=l|33,e=m?e&-9:e|8,l!=e&&(m=a,Object.isFrozen(m)&&(m=Array.prototype.slice.call(m)),dt(m,e),a=m),p!==a&&Ht(t,n,a),(i||r&&o)&&xt(s,2),r&&Object.freeze(s),s}return i||(i=Object.isFrozen(s),r&&!i?Object.freeze(s):!r&&i&&(s=Array.prototype.slice.call(s),t.h[n]=s)),s}function ie(t,e,n){var r=!!(D(t.o)&2);if(e=hn(t,e,n,r,r),t=Se(t,n,3,r),!(r||D(t)&8)){for(r=0;r<e.length;r++){if(n=e[r],D(n.o)&2){var i=yn(n,!1);i.j=n}else i=n;n!==i&&(e[r]=i,t[r]=i.o)}xt(t,8)}return e}function vt(t,e,n){if(n!=null&&typeof n!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof n+": "+n);pt(t,e,n)}function fn(t,e,n,r,i){Ee(t);var s=hn(t,n,e,!1,!1);return n=r??new n,t=Se(t,e,2,!1),i!=null?(s.splice(i,0,n),t.splice(i,0,n.o)):(s.push(n),t.push(n.o)),n.C()&&un(t,8),n}function oe(t,e){return t??e}function yt(t,e,n){return n=n===void 0?0:n,oe(xe(t,e),n)}var se;function or(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":if(t)if(Array.isArray(t)){if((D(t)&128)!==0)return t=Array.prototype.slice.call(t),Te(t),t}else{if(ut&&t!=null&&t instanceof Uint8Array)return Ot(t);if(t instanceof Gt){var e=t.V;return e==null?"":typeof e=="string"?e:t.V=Ot(e)}}}return t}function cn(t,e,n,r){if(t!=null){if(Array.isArray(t))t=Le(t,e,n,r!==void 0);else if(re(t)){var i={},s;for(s in t)i[s]=cn(t[s],e,n,r);t=i}else t=e(t,r);return t}}function Le(t,e,n,r){var i=D(t);r=r?!!(i&16):void 0,t=Array.prototype.slice.call(t);for(var s=0;s<t.length;s++)t[s]=cn(t[s],e,n,r);return n(i,t),t}function sr(t){return t.ja===je?t.toJSON():or(t)}function ur(t,e){t&128&&Te(e)}function dn(t,e,n){if(n=n===void 0?ne:n,t!=null){if(ut&&t instanceof Uint8Array)return t.length?new Gt(new Uint8Array(t),Ut):ge();if(Array.isArray(t)){var r=D(t);return r&2?t:e&&!(r&32)&&(r&16||r===0)?(dt(t,r|2),t):(t=Le(t,dn,r&4?ne:n,!0),e=D(t),e&4&&e&2&&Object.freeze(t),t)}return t.ja===je?vn(t):t}}function pn(t,e,n,r,i,s,o){if(t=t.h&&t.h[n]){if(r=D(t),r&2?r=t:(s=T(t,vn),ne(r,s),Object.freeze(s),r=s),Ee(e),o=r==null?Bt:Ae([]),r!=null){for(s=!!r.length,t=0;t<r.length;t++){var a=r[t];s=s&&!(D(a.o)&2),o[t]=a.o}s=(s?8:0)|1,t=D(o),(t&s)!==s&&(Object.isFrozen(o)&&(o=Array.prototype.slice.call(o)),dt(o,t|s)),e.h||(e.h={}),e.h[n]=r}else e.h&&(e.h[n]=void 0);Ht(e,n,o,i)}else pt(e,n,dn(r,s,o),i)}function vn(t){return D(t.o)&2||(t=yn(t,!0),xt(t.o,2)),t}function yn(t,e){var n=t.o,r=[];xt(r,16);var i=t.constructor.h;if(i&&r.push(i),i=t.B,i){r.length=n.length,r.fill(void 0,r.length,n.length);var s={};r[r.length-1]=s}(D(n)&128)!==0&&Te(r),e=e||t.C()?ne:ir,s=t.constructor,se=r,r=new s(r),se=void 0,t.R&&(r.R=t.R.slice()),s=!!(D(n)&16);for(var o=i?n.length-1:n.length,a=0;a<o;a++)pn(t,r,a-t.G,n[a],!1,s,e);if(i)for(var l in i)pn(t,r,+l,i[l],!0,s,e);return r}function K(t,e,n){t==null&&(t=se),se=void 0;var r=this.constructor.i||0,i=0<r,s=this.constructor.h,o=!1;if(t==null){t=s?[s]:[];var a=48,l=!0;i&&(r=0,a|=128),dt(t,a)}else{if(!Array.isArray(t)||s&&s!==t[0])throw Error();var p=a=xt(t,0);if((l=(16&p)!==0)&&((o=(32&p)!==0)||(p|=32)),i){if(128&p)r=0;else if(0<t.length){var m=t[t.length-1];if(re(m)&&"g"in m){r=0,p|=128,delete m.g;var S=!0,A;for(A in m){S=!1;break}S&&t.pop()}}}else if(128&p)throw Error();a!==p&&dt(t,p)}this.G=(s?0:-1)-r,this.h=void 0,this.o=t;t:{if(s=this.o.length,r=s-1,s&&(s=this.o[r],re(s))){this.B=s,this.i=r-this.G;break t}e!==void 0&&-1<e?(this.i=Math.max(e,r+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!i&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(n){e=l&&!o&&!0,i=this.i;var w;for(l=0;l<n.length;l++)o=n[l],o<i?(o+=this.G,(r=t[o])?gn(r,e):t[o]=Bt):(w||(w=ln(this)),(r=w[o])?gn(r,e):w[o]=Bt)}}K.prototype.toJSON=function(){return Le(this.o,sr,ur)},K.prototype.C=function(){return!!(D(this.o)&2)};function gn(t,e){if(Array.isArray(t)){var n=D(t),r=1;!e||n&2||(r|=16),(n&r)!==r&&dt(t,n|r)}}K.prototype.ja=je,K.prototype.toString=function(){return this.o.toString()};function mn(t,e,n){if(n){var r={},i;for(i in n){var s=n[i],o=s.qa;o||(r.J=s.wa||s.oa.W,s.ia?(r.aa=En(s.ia),o=(function(a){return function(l,p,m){return a.J(l,p,m,a.aa)}})(r)):s.ka?(r.Z=Tn(s.da.P,s.ka),o=(function(a){return function(l,p,m){return a.J(l,p,m,a.Z)}})(r)):o=r.J,s.qa=o),o(e,t,s.da),r={J:r.J,aa:r.aa,Z:r.Z}}}rr(e,t)}var ue=Symbol();function wn(t,e,n){return t[ue]||(t[ue]=function(r,i){return e(r,i,n)})}function bn(t){var e=t[ue];if(!e){var n=Oe(t);e=function(r,i){return Sn(r,i,n)},t[ue]=e}return e}function ar(t){var e=t.ia;if(e)return bn(e);if(e=t.va)return wn(t.da.P,e,t.ka)}function lr(t){var e=ar(t),n=t.da,r=t.oa.U;return e?function(i,s){return r(i,s,n,e)}:function(i,s){return r(i,s,n)}}function An(t,e){var n=t[e];return typeof n=="function"&&n.length===0&&(n=n(),t[e]=n),Array.isArray(n)&&(zt in n||Wt in n||0<n.length&&typeof n[0]=="function")?n:void 0}function jn(t,e,n,r,i,s){e.P=t[0];var o=1;if(t.length>o&&typeof t[o]!="number"){var a=t[o++];n(e,a)}for(;o<t.length;){n=t[o++];for(var l=o+1;l<t.length&&typeof t[l]!="number";)l++;switch(a=t[o++],l-=o,l){case 0:r(e,n,a);break;case 1:(l=An(t,o))?(o++,i(e,n,a,l)):r(e,n,a,t[o++]);break;case 2:l=o++,l=An(t,l),i(e,n,a,l,t[o++]);break;case 3:s(e,n,a,t[o++],t[o++],t[o++]);break;case 4:s(e,n,a,t[o++],t[o++],t[o++],t[o++]);break;default:throw Error("unexpected number of binary field arguments: "+l)}}return e}var ae=Symbol();function En(t){var e=t[ae];if(!e){var n=Ce(t);e=function(r,i){return xn(r,i,n)},t[ae]=e}return e}function Tn(t,e){var n=t[ae];return n||(n=function(r,i){return mn(r,i,e)},t[ae]=n),n}var Wt=Symbol();function hr(t,e){t.push(e)}function fr(t,e,n){t.push(e,n.W)}function cr(t,e,n,r){var i=En(r),s=Ce(r).P,o=n.W;t.push(e,function(a,l,p){return o(a,l,p,s,i)})}function dr(t,e,n,r,i,s){var o=Tn(r,s),a=n.W;t.push(e,function(l,p,m){return a(l,p,m,r,o)})}function Ce(t){var e=t[Wt];return e||(e=jn(t,t[Wt]=[],hr,fr,cr,dr),zt in t&&Wt in t&&(t.length=0),e)}var zt=Symbol();function pr(t,e){t[0]=e}function vr(t,e,n,r){var i=n.U;t[e]=r?function(s,o,a){return i(s,o,a,r)}:i}function yr(t,e,n,r,i){var s=n.U,o=bn(r),a=Oe(r).P;t[e]=function(l,p,m){return s(l,p,m,a,o,i)}}function gr(t,e,n,r,i,s,o){var a=n.U,l=wn(r,i,s);t[e]=function(p,m,S){return a(p,m,S,r,l,o)}}function Oe(t){var e=t[zt];return e||(e=jn(t,t[zt]={},pr,vr,yr,gr),zt in t&&Wt in t&&(t.length=0),e)}function Sn(t,e,n){for(;sn(e)&&e.i!=4;){var r=e.l,i=n[r];if(!i){var s=n[0];s&&(s=s[r])&&(i=n[r]=lr(s))}if(!i||!i(e,t,r)){i=e,r=t,s=i.j,te(i);var o=i;if(!o.ca){if(i=o.h.h-s,o.h.h=s,o=o.h,i==0)i=ge();else{if(s=nn(o,i),o.S&&o.m)i=o.i.subarray(s,s+i);else{o=o.i;var a=s;i=s+i,i=a===i?pe():Qn?o.slice(a,i):new Uint8Array(o.subarray(a,i))}i=i.length==0?ge():new Gt(i,Ut)}(s=r.R)?s.push(i):r.R=[i]}}}return t}function xn(t,e,n){for(var r=n.length,i=r%2==1,s=i?1:0;s<r;s+=2)(0,n[s+1])(e,t,n[s]);mn(t,e,i?n[0]:void 0)}function Yt(t,e){return{U:t,W:e}}var lt=Yt(function(t,e,n){if(t.i!==5)return!1;t=t.h;var r=t.i,i=t.h,s=r[i],o=r[i+1],a=r[i+2];return r=r[i+3],Tt(t,t.h+4),o=(s<<0|o<<8|a<<16|r<<24)>>>0,t=2*(o>>31)+1,s=o>>>23&255,o&=8388607,pt(e,n,s==255?o?NaN:1/0*t:s==0?t*Math.pow(2,-149)*o:t*Math.pow(2,s-150)*(o+Math.pow(2,23))),!0},function(t,e,n){if(e=xe(e,n),e!=null){St(t.h,8*n+5),t=t.h;var r=+e;r===0?0<1/r?H=X=0:(X=0,H=2147483648):isNaN(r)?(X=0,H=2147483647):(r=(n=0>r?-2147483648:0)?-r:r,34028234663852886e22<r?(X=0,H=(n|2139095040)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),X=0,H=(n|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),r=Math.round(8388608*r),16777216<=r&&++e,X=0,H=(n|e+127<<23|r&8388607)>>>0)),n=H,t.h.push(n>>>0&255),t.h.push(n>>>8&255),t.h.push(n>>>16&255),t.h.push(n>>>24&255)}}),mr=Yt(function(t,e,n){if(t.i!==0)return!1;var r=t.h,i=0,s=t=0,o=r.i,a=r.h;do{var l=o[a++];i|=(l&127)<<s,s+=7}while(32>s&&l&128);for(32<s&&(t|=(l&127)>>4),s=3;32>s&&l&128;s+=7)l=o[a++],t|=(l&127)<<s;if(Tt(r,a),128>l)r=i>>>0,l=t>>>0,(t=l&2147483648)&&(r=~r+1>>>0,l=~l>>>0,r==0&&(l=l+1>>>0)),r=4294967296*l+(r>>>0);else throw ve();return pt(e,n,t?-r:r),!0},function(t,e,n){e=at(e,n),e!=null&&(typeof e=="string"&&Xe(e),e!=null&&(St(t.h,8*n),typeof e=="number"?(t=t.h,We(e),on(t,H,X)):(n=Xe(e),on(t.h,n.i,n.h))))}),wr=Yt(function(t,e,n){return t.i!==0?!1:(pt(e,n,Dt(t.h)),!0)},function(t,e,n){if(e=at(e,n),e!=null&&e!=null)if(St(t.h,8*n),t=t.h,n=e,0<=n)St(t,n);else{for(e=0;9>e;e++)t.h.push(n&127|128),n>>=7;t.h.push(1)}}),Ln=Yt(function(t,e,n){if(t.i!==2)return!1;var r=Dt(t.h)>>>0;t=t.h;var i=nn(t,r);if(t=t.i,qn){var s=t,o;(o=ye)||(o=ye=new TextDecoder("utf-8",{fatal:!0})),t=i+r,s=i===0&&t===s.length?s:s.subarray(i,t);try{var a=o.decode(s)}catch(S){if(qt===void 0){try{o.decode(new Uint8Array([128]))}catch{}try{o.decode(new Uint8Array([97])),qt=!0}catch{qt=!1}}throw!qt&&(ye=void 0),S}}else{a=i,r=a+r,i=[];for(var l=null,p,m;a<r;)p=t[a++],128>p?i.push(p):224>p?a>=r?Et():(m=t[a++],194>p||(m&192)!==128?(a--,Et()):i.push((p&31)<<6|m&63)):240>p?a>=r-1?Et():(m=t[a++],(m&192)!==128||p===224&&160>m||p===237&&160<=m||((s=t[a++])&192)!==128?(a--,Et()):i.push((p&15)<<12|(m&63)<<6|s&63)):244>=p?a>=r-2?Et():(m=t[a++],(m&192)!==128||(p<<28)+(m-144)>>30!==0||((s=t[a++])&192)!==128||((o=t[a++])&192)!==128?(a--,Et()):(p=(p&7)<<18|(m&63)<<12|(s&63)<<6|o&63,p-=65536,i.push((p>>10&1023)+55296,(p&1023)+56320))):Et(),8192<=i.length&&(l=Ze(l,i),i.length=0);a=Ze(l,i)}return pt(e,n,a),!0},function(t,e,n){if(e=at(e,n),e!=null){var r=!1;if(r=r===void 0?!1:r,tr){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(e))throw Error("Found an unpaired surrogate");e=(Qe||(Qe=new TextEncoder)).encode(e)}else{for(var i=0,s=new Uint8Array(3*e.length),o=0;o<e.length;o++){var a=e.charCodeAt(o);if(128>a)s[i++]=a;else{if(2048>a)s[i++]=a>>6|192;else{if(55296<=a&&57343>=a){if(56319>=a&&o<e.length){var l=e.charCodeAt(++o);if(56320<=l&&57343>=l){a=1024*(a-55296)+l-56320+65536,s[i++]=a>>18|240,s[i++]=a>>12&63|128,s[i++]=a>>6&63|128,s[i++]=a&63|128;continue}else o--}if(r)throw Error("Found an unpaired surrogate");a=65533}s[i++]=a>>12|224,s[i++]=a>>6&63|128}s[i++]=a&63|128}}e=i===s.length?s:s.subarray(0,i)}St(t.h,8*n+2),St(t.h,e.length),kt(t,t.h.end()),kt(t,e)}}),Cn=Yt(function(t,e,n,r,i){if(t.i!==2)return!1;e=fn(e,n,r),n=t.h.j,r=Dt(t.h)>>>0;var s=t.h.h+r,o=s-n;if(0>=o&&(t.h.j=s,i(e,t,void 0,void 0,void 0),o=s-t.h.h),o)throw Error("Message parsing ended unexpectedly. Expected to read "+(r+" bytes, instead read "+(r-o)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return t.h.h=s,t.h.j=n,!0},function(t,e,n,r,i){if(e=ie(e,r,n),e!=null)for(r=0;r<e.length;r++){var s=t;St(s.h,8*n+2);var o=s.h.end();kt(s,o),o.push(s.i),s=o,i(e[r],t),o=t;var a=s.pop();for(a=o.i+o.h.length()-a;127<a;)s.push(a&127|128),a>>>=7,o.i++;s.push(a),o.i++}});function ke(t){return function(e,n){t:{if(ee.length){var r=ee.pop();r.setOptions(n),me(r.h,e,n),e=r}else e=new be(e,n);try{var i=Oe(t),s=Sn(new i.P,e,i);break t}finally{i=e.h,i.i=null,i.m=!1,i.l=0,i.j=0,i.h=0,i.S=!1,e.l=-1,e.i=-1,100>ee.length&&ee.push(e)}s=void 0}return s}}function Pe(t){return function(){var e=new nr;xn(this,e,Ce(t)),kt(e,e.h.end());for(var n=new Uint8Array(e.i),r=e.j,i=r.length,s=0,o=0;o<i;o++){var a=r[o];n.set(a,s),s+=a.length}return e.j=[n],n}}function Pt(t){K.call(this,t)}q(Pt,K);var On=[Pt,1,wr,2,lt,3,Ln,4,Ln];Pt.prototype.l=Pe(On);function Ie(t){K.call(this,t,-1,br)}q(Ie,K),Ie.prototype.addClassification=function(t,e){return fn(this,1,Pt,t,e),this};var br=[1],kn=ke([Ie,1,Cn,On]);function It(t){K.call(this,t)}q(It,K);var Pn=[It,1,lt,2,lt,3,lt,4,lt,5,lt];It.prototype.l=Pe(Pn);function In(t){K.call(this,t,-1,Ar)}q(In,K);var Ar=[1],Mn=ke([In,1,Cn,Pn]);function le(t){K.call(this,t)}q(le,K);var _n=[le,1,lt,2,lt,3,lt,4,lt,5,lt,6,mr],jr=ke(_n);le.prototype.l=Pe(_n);function Fn(t,e,n){if(n=t.createShader(n===0?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+t.getShaderInfoLog(n));return n}function Rn(t){return ie(t,Pt,1).map(function(e){var n=at(e,1);return{index:n??0,score:yt(e,2),label:at(e,3)!=null?oe(at(e,3),""):void 0,displayName:at(e,4)!=null?oe(at(e,4),""):void 0}})}function Nn(t){return{x:yt(t,1),y:yt(t,2),z:yt(t,3),visibility:xe(t,4)!=null?yt(t,4):void 0}}function Un(t){return t.map(function(e){return ie(Mn(e),It,1).map(Nn)})}function Me(t,e){this.i=t,this.h=e,this.m=0}function Gn(t,e,n){return Er(t,e),typeof t.h.canvas.transferToImageBitmap=="function"?Promise.resolve(t.h.canvas.transferToImageBitmap()):n?Promise.resolve(t.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(t.h.canvas):(t.j===void 0&&(t.j=document.createElement("canvas")),new Promise(function(r){t.j.height=t.h.canvas.height,t.j.width=t.h.canvas.width,t.j.getContext("2d",{}).drawImage(t.h.canvas,0,0,t.h.canvas.width,t.h.canvas.height),r(t.j)}))}function Er(t,e){var n=t.h;if(t.s===void 0){var r=Fn(n,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),i=Fn(n,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),s=n.createProgram();if(n.attachShader(s,r),n.attachShader(s,i),n.linkProgram(s),!n.getProgramParameter(s,n.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+n.getProgramInfoLog(s));r=t.s=s,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.l={O:n.getAttribLocation(r,"aVertex"),N:n.getAttribLocation(r,"aTex"),xa:i},t.v=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.v),n.enableVertexAttribArray(t.l.O),n.vertexAttribPointer(t.l.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.enableVertexAttribArray(t.l.N),n.vertexAttribPointer(t.l.N,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.l,n.useProgram(t.s),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.i.bindTexture2d(e.glName),n.enableVertexAttribArray(r.O),n.bindBuffer(n.ARRAY_BUFFER,t.v),n.vertexAttribPointer(r.O,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,t.u),n.vertexAttribPointer(r.N,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.O),n.disableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,null),t.i.bindTexture2d(0)}function Tr(t){this.h=t}var Sr=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function xr(t,e){return e+t}function Dn(t,e){window[t]=e}function Lr(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise(function(n){e.addEventListener("load",function(){n()},!1),e.addEventListener("error",function(){n()},!1),document.body.appendChild(e)})}function Cr(){return f(function(t){switch(t.h){case 1:return t.s=2,_(t,WebAssembly.instantiate(Sr),4);case 4:t.h=3,t.s=0;break;case 2:return t.s=0,t.l=null,t.return(!1);case 3:return t.return(!0)}})}function _e(t){if(this.h=t,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=t&&t.locateFile||xr,typeof window=="object")var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=e,t.options){e=O(Object.keys(t.options));for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;r!==void 0&&(this.l[n]=typeof r=="function"?r():r)}}}b=_e.prototype,b.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Or(t){var e,n,r,i,s,o,a,l,p,m,S;return f(function(A){switch(A.h){case 1:return t.ga?(e=t.h.files===void 0?[]:typeof t.h.files=="function"?t.h.files(t.l):t.h.files,_(A,Cr(),2)):A.return();case 2:if(n=A.i,typeof window=="object")return Dn("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),Dn("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),o=e.filter(function(w){return w.data!==void 0}),a=e.filter(function(w){return w.data===void 0}),l=Promise.all(o.map(function(w){var x=he(t,w.url);if(w.path!==void 0){var k=w.path;x=x.then(function(N){return t.overrideFile(k,N),Promise.resolve(N)})}return x})),p=Promise.all(a.map(function(w){return w.simd===void 0||w.simd&&n||!w.simd&&!n?Lr(t.locateFile(w.url,t.ha)):Promise.resolve()})).then(function(){var w,x,k;return f(function(N){if(N.h==1)return w=window.createMediapipeSolutionsWasm,x=window.createMediapipeSolutionsPackedAssets,k=t,_(N,w(x),2);k.i=N.i,N.h=0})}),m=(function(){return f(function(w){return t.h.graph&&t.h.graph.url?w=_(w,he(t,t.h.graph.url),0):(w.h=0,w=void 0),w})})(),_(A,Promise.all([p,l,m]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return r=e.filter(function(w){return w.simd===void 0||w.simd&&n||!w.simd&&!n}).map(function(w){return t.locateFile(w.url,t.ha)}),importScripts.apply(null,U(r)),i=t,_(A,createMediapipeSolutionsWasm(Module),6);case 6:i.i=A.i,t.m=new OffscreenCanvas(1,1),t.i.canvas=t.m,s=t.i.GL.createContext(t.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),t.i.GL.makeContextCurrent(s),A.h=4;break;case 7:if(t.m=document.createElement("canvas"),S=t.m.getContext("webgl2",{}),!S&&(S=t.m.getContext("webgl",{}),!S))return alert("Failed to create WebGL canvas context when passing video frame."),A.return();t.K=S,t.i.canvas=t.m,t.i.createContext(t.m,!0,!0,{});case 4:t.j=new t.i.SolutionWasm,t.ga=!1,A.h=0}})}function kr(t){var e,n,r,i,s,o,a,l;return f(function(p){if(p.h==1){if(t.h.graph&&t.h.graph.url&&t.fa===t.h.graph.url)return p.return();if(t.u=!0,!t.h.graph||!t.h.graph.url){p.h=2;return}return t.fa=t.h.graph.url,_(p,he(t,t.h.graph.url),3)}for(p.h!=2&&(e=p.i,t.j.loadGraph(e)),n=O(Object.keys(t.D)),r=n.next();!r.done;r=n.next())i=r.value,t.j.overrideFile(i,t.D[i]);if(t.D={},t.h.listeners)for(s=O(t.h.listeners),o=s.next();!o.done;o=s.next())a=o.value,_r(t,a);l=t.l,t.l={},t.setOptions(l),p.h=0})}b.reset=function(){var t=this;return f(function(e){t.j&&(t.j.reset(),t.s={},t.v={}),e.h=0})},b.setOptions=function(t,e){var n=this;if(e=e||this.h.options){for(var r=[],i=[],s={},o=O(Object.keys(t)),a=o.next();!a.done;s={X:s.X,Y:s.Y},a=o.next())if(a=a.value,!(a in this.l&&this.l[a]===t[a])){this.l[a]=t[a];var l=e[a];l!==void 0&&(l.onChange&&(s.X=l.onChange,s.Y=t[a],r.push((function(p){return function(){var m;return f(function(S){if(S.h==1)return _(S,p.X(p.Y),2);m=S.i,m===!0&&(n.u=!0),S.h=0})}})(s))),l.graphOptionXref&&(a=Object.assign({},{calculatorName:"",calculatorIndex:0},l.graphOptionXref,{valueNumber:l.type===1?t[a]:0,valueBoolean:l.type===0?t[a]:!1,valueString:l.type===2?t[a]:""}),i.push(a)))}(r.length!==0||i.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(i),this.F=(this.F===void 0?[]:this.F).concat(r))}};function Pr(t){var e,n,r,i,s,o,a;return f(function(l){switch(l.h){case 1:if(!t.u)return l.return();if(!t.F){l.h=2;break}e=O(t.F),n=e.next();case 3:if(n.done){l.h=5;break}return r=n.value,_(l,r(),4);case 4:n=e.next(),l.h=3;break;case 5:t.F=void 0;case 2:if(t.H){for(i=new t.i.GraphOptionChangeRequestList,s=O(t.H),o=s.next();!o.done;o=s.next())a=o.value,i.push_back(a);t.j.changeOptions(i),i.delete(),t.H=void 0}t.u=!1,l.h=0}})}b.initialize=function(){var t=this;return f(function(e){return e.h==1?_(e,Or(t),2):e.h!=3?_(e,kr(t),3):_(e,Pr(t),0)})};function he(t,e){var n,r;return f(function(i){return e in t.L?i.return(t.L[e]):(n=t.locateFile(e,""),r=fetch(n).then(function(s){return s.arrayBuffer()}),t.L[e]=r,i.return(r))})}b.overrideFile=function(t,e){this.j?this.j.overrideFile(t,e):this.D[t]=e},b.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},b.send=function(t,e){var n=this,r,i,s,o,a,l,p,m,S;return f(function(A){switch(A.h){case 1:return n.h.inputs?(r=1e3*(e??performance.now()),_(A,n.I,2)):A.return();case 2:return _(A,n.initialize(),3);case 3:for(i=new n.i.PacketDataList,s=O(Object.keys(t)),o=s.next();!o.done;o=s.next())if(a=o.value,l=n.h.inputs[a]){t:{var w=t[a];switch(l.type){case"video":var x=n.s[l.stream];if(x||(x=new Me(n.i,n.K),n.s[l.stream]=x),x.m===0&&(x.m=x.i.createTexture()),typeof HTMLVideoElement<"u"&&w instanceof HTMLVideoElement)var k=w.videoWidth,N=w.videoHeight;else typeof HTMLImageElement<"u"&&w instanceof HTMLImageElement?(k=w.naturalWidth,N=w.naturalHeight):(k=w.width,N=w.height);N={glName:x.m,width:k,height:N},k=x.h,k.canvas.width=N.width,k.canvas.height=N.height,k.activeTexture(k.TEXTURE0),x.i.bindTexture2d(x.m),k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,w),x.i.bindTexture2d(0),x=N;break t;case"detections":for(x=n.s[l.stream],x||(x=new Tr(n.i),n.s[l.stream]=x),x.data||(x.data=new x.h.DetectionListData),x.data.reset(w.length),N=0;N<w.length;++N){k=w[N];var F=x.data,z=F.setBoundingBox,nt=N,$=k.la,M=new le;if(vt(M,1,$.ra),vt(M,2,$.sa),vt(M,3,$.height),vt(M,4,$.width),vt(M,5,$.rotation),pt(M,6,$.pa),$=M.l(),z.call(F,nt,$),k.ea)for(F=0;F<k.ea.length;++F){M=k.ea[F],z=x.data,nt=z.addNormalizedLandmark,$=N,M=Object.assign({},M,{visibility:M.visibility?M.visibility:0});var Y=new It;vt(Y,1,M.x),vt(Y,2,M.y),vt(Y,3,M.z),M.visibility&&vt(Y,4,M.visibility),M=Y.l(),nt.call(z,$,M)}if(k.ba)for(F=0;F<k.ba.length;++F)z=x.data,nt=z.addClassification,$=N,M=k.ba[F],Y=new Pt,vt(Y,2,M.score),M.index&&pt(Y,1,M.index),M.label&&pt(Y,3,M.label),M.displayName&&pt(Y,4,M.displayName),M=Y.l(),nt.call(z,$,M)}x=x.data;break t;default:x={}}}switch(p=x,m=l.stream,l.type){case"video":i.pushTexture2d(Object.assign({},p,{stream:m,timestamp:r}));break;case"detections":S=p,S.stream=m,S.timestamp=r,i.pushDetectionList(S);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return n.j.send(i),_(A,n.I,4);case 4:i.delete(),A.h=0}})};function Ir(t,e,n){var r,i,s,o,a,l,p,m,S,A,w,x,k,N;return f(function(F){switch(F.h){case 1:if(!n)return F.return(e);for(r={},i=0,s=O(Object.keys(n)),o=s.next();!o.done;o=s.next())a=o.value,l=n[a],typeof l!="string"&&l.type==="texture"&&e[l.stream]!==void 0&&++i;1<i&&(t.M=!1),p=O(Object.keys(n)),o=p.next();case 2:if(o.done){F.h=4;break}if(m=o.value,S=n[m],typeof S=="string")return k=r,N=m,_(F,Mr(t,m,e[S]),14);if(A=e[S.stream],S.type==="detection_list"){if(A){for(var z=A.getRectList(),nt=A.getLandmarksList(),$=A.getClassificationsList(),M=[],Y=0;Y<z.size();++Y){var At=jr(z.get(Y)),Fr=yt(At,1),Rr=yt(At,2),Nr=yt(At,3),Ur=yt(At,4),Gr=yt(At,5,0),fe=void 0;fe=fe===void 0?0:fe,At={la:{ra:Fr,sa:Rr,height:Nr,width:Ur,rotation:Gr,pa:oe(at(At,6),fe)},ea:ie(Mn(nt.get(Y)),It,1).map(Nn),ba:Rn(kn($.get(Y)))},M.push(At)}z=M}else z=[];r[m]=z,F.h=7;break}if(S.type==="proto_list"){if(A){for(z=Array(A.size()),nt=0;nt<A.size();nt++)z[nt]=A.get(nt);A.delete()}else z=[];r[m]=z,F.h=7;break}if(A===void 0){F.h=3;break}if(S.type==="float_list"){r[m]=A,F.h=7;break}if(S.type==="proto"){r[m]=A,F.h=7;break}if(S.type!=="texture")throw Error("Unknown output config type: '"+S.type+"'");return w=t.v[m],w||(w=new Me(t.i,t.K),t.v[m]=w),_(F,Gn(w,A,t.M),13);case 13:x=F.i,r[m]=x;case 7:S.transform&&r[m]&&(r[m]=S.transform(r[m])),F.h=3;break;case 14:k[N]=F.i;case 3:o=p.next(),F.h=2;break;case 4:return F.return(r)}})}function Mr(t,e,n){var r;return f(function(i){return typeof n=="number"||n instanceof Uint8Array||n instanceof t.i.Uint8BlobList?i.return(n):n instanceof t.i.Texture2dDataOut?(r=t.v[e],r||(r=new Me(t.i,t.K),t.v[e]=r),i.return(Gn(r,n,t.M))):i.return(void 0)})}function _r(t,e){for(var n=e.name||"$",r=[].concat(U(e.wants)),i=new t.i.StringList,s=O(e.wants),o=s.next();!o.done;o=s.next())i.push_back(o.value);s=t.i.PacketListener.implement({onResults:function(a){for(var l={},p=0;p<e.wants.length;++p)l[r[p]]=a.get(p);var m=t.listeners[n];m&&(t.I=Ir(t,l,e.outs).then(function(S){S=m(S);for(var A=0;A<e.wants.length;++A){var w=l[r[A]];typeof w=="object"&&w.hasOwnProperty&&w.hasOwnProperty("delete")&&w.delete()}S&&(t.I=S)}))}}),t.j.attachMultiListener(i,s),i.delete()}b.onResults=function(t,e){this.listeners[e||"$"]=t},G("Solution",_e),G("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Bn(t){return t===void 0&&(t=0),t===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Hn(t){var e=this;t=t||{},this.h=new _e({locateFile:t.locateFile,files:function(n){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Bn(n.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Un},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Un},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(n){return n.map(function(r){return Rn(kn(r))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(n){var r,i,s;return f(function(o){return o.h==1?(r=Bn(n),i="third_party/mediapipe/modules/hand_landmark/"+r,_(o,he(e.h,r),2)):(s=o.i,e.h.overrideFile(i,s),o.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}b=Hn.prototype,b.close=function(){return this.h.close(),Promise.resolve()},b.onResults=function(t){this.h.onResults(t)},b.initialize=function(){var t=this;return f(function(e){return _(e,t.h.initialize(),0)})},b.reset=function(){this.h.reset()},b.send=function(t){var e=this;return f(function(n){return _(n,e.h.send(t),0)})},b.setOptions=function(t){this.h.setOptions(t)},G("Hands",Hn),G("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),G("VERSION","0.4.1675469240")}).call(Fe)),Fe}var zr=Wr(),Re={},zn;function Yr(){return zn||(zn=1,(function(){function b(h){var f=0;return function(){return f<h.length?{done:!1,value:h[f++]}:{done:!0}}}var u=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,f,E){return h==Array.prototype||h==Object.prototype||(h[f]=E.value),h};function d(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ce=="object"&&ce];for(var f=0;f<h.length;++f){var E=h[f];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var c=d(this);function v(h,f){if(f)t:{var E=c;h=h.split(".");for(var j=0;j<h.length-1;j++){var I=h[j];if(!(I in E))break t;E=E[I]}h=h[h.length-1],j=E[h],f=f(j),f!=j&&f!=null&&u(E,h,{configurable:!0,writable:!0,value:f})}}v("Symbol",function(h){function f(G){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new E(j+(G||"")+"_"+I++,G)}function E(G,g){this.g=G,u(this,"description",{configurable:!0,writable:!0,value:g})}if(h)return h;E.prototype.toString=function(){return this.g};var j="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",I=0;return f}),v("Symbol.iterator",function(h){if(h)return h;h=Symbol("Symbol.iterator");for(var f="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),E=0;E<f.length;E++){var j=c[f[E]];typeof j=="function"&&typeof j.prototype[h]!="function"&&u(j.prototype,h,{configurable:!0,writable:!0,value:function(){return y(b(this))}})}return h});function y(h){return h={next:h},h[Symbol.iterator]=function(){return this},h}function L(h){var f=typeof Symbol<"u"&&Symbol.iterator&&h[Symbol.iterator];return f?f.call(h):{next:b(h)}}function O(){this.i=!1,this.g=null,this.o=void 0,this.j=1,this.m=0,this.h=null}function U(h){if(h.i)throw new TypeError("Generator is already running");h.i=!0}O.prototype.l=function(h){this.o=h};function W(h,f){h.h={F:f,G:!0},h.j=h.m}O.prototype.return=function(h){this.h={return:h},this.j=this.m};function mt(h){this.g=new O,this.h=h}function ft(h,f){U(h.g);var E=h.g.g;return E?it(h,"return"in E?E.return:function(j){return{value:j,done:!0}},f,h.g.return):(h.g.return(f),ot(h))}function it(h,f,E,j){try{var I=f.call(h.g.g,E);if(!(I instanceof Object))throw new TypeError("Iterator result "+I+" is not an object");if(!I.done)return h.g.i=!1,I;var G=I.value}catch(g){return h.g.g=null,W(h.g,g),ot(h)}return h.g.g=null,j.call(h.g,G),ot(h)}function ot(h){for(;h.g.j;)try{var f=h.h(h.g);if(f)return h.g.i=!1,{value:f.value,done:!1}}catch(E){h.g.o=void 0,W(h.g,E)}if(h.g.i=!1,h.g.h){if(f=h.g.h,h.g.h=null,f.G)throw f.F;return{value:f.return,done:!0}}return{value:void 0,done:!0}}function wt(h){this.next=function(f){return U(h.g),h.g.g?f=it(h,h.g.g.next,f,h.g.l):(h.g.l(f),f=ot(h)),f},this.throw=function(f){return U(h.g),h.g.g?f=it(h,h.g.g.throw,f,h.g.l):(W(h.g,f),f=ot(h)),f},this.return=function(f){return ft(h,f)},this[Symbol.iterator]=function(){return this}}function J(h){function f(j){return h.next(j)}function E(j){return h.throw(j)}return new Promise(function(j,I){function G(g){g.done?j(g.value):Promise.resolve(g.value).then(f,E).then(G,I)}G(h.next())})}v("Promise",function(h){function f(g){this.h=0,this.i=void 0,this.g=[],this.o=!1;var T=this.j();try{g(T.resolve,T.reject)}catch(P){T.reject(P)}}function E(){this.g=null}function j(g){return g instanceof f?g:new f(function(T){T(g)})}if(h)return h;E.prototype.h=function(g){if(this.g==null){this.g=[];var T=this;this.i(function(){T.l()})}this.g.push(g)};var I=c.setTimeout;E.prototype.i=function(g){I(g,0)},E.prototype.l=function(){for(;this.g&&this.g.length;){var g=this.g;this.g=[];for(var T=0;T<g.length;++T){var P=g[T];g[T]=null;try{P()}catch(R){this.j(R)}}}this.g=null},E.prototype.j=function(g){this.i(function(){throw g})},f.prototype.j=function(){function g(R){return function(Q){P||(P=!0,R.call(T,Q))}}var T=this,P=!1;return{resolve:g(this.A),reject:g(this.l)}},f.prototype.A=function(g){if(g===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof f)this.C(g);else{t:switch(typeof g){case"object":var T=g!=null;break t;case"function":T=!0;break t;default:T=!1}T?this.v(g):this.m(g)}},f.prototype.v=function(g){var T=void 0;try{T=g.then}catch(P){this.l(P);return}typeof T=="function"?this.D(T,g):this.m(g)},f.prototype.l=function(g){this.u(2,g)},f.prototype.m=function(g){this.u(1,g)},f.prototype.u=function(g,T){if(this.h!=0)throw Error("Cannot settle("+g+", "+T+"): Promise already settled in state"+this.h);this.h=g,this.i=T,this.h===2&&this.B(),this.H()},f.prototype.B=function(){var g=this;I(function(){if(g.I()){var T=c.console;typeof T<"u"&&T.error(g.i)}},1)},f.prototype.I=function(){if(this.o)return!1;var g=c.CustomEvent,T=c.Event,P=c.dispatchEvent;return typeof P>"u"?!0:(typeof g=="function"?g=new g("unhandledrejection",{cancelable:!0}):typeof T=="function"?g=new T("unhandledrejection",{cancelable:!0}):(g=c.document.createEvent("CustomEvent"),g.initCustomEvent("unhandledrejection",!1,!0,g)),g.promise=this,g.reason=this.i,P(g))},f.prototype.H=function(){if(this.g!=null){for(var g=0;g<this.g.length;++g)G.h(this.g[g]);this.g=null}};var G=new E;return f.prototype.C=function(g){var T=this.j();g.s(T.resolve,T.reject)},f.prototype.D=function(g,T){var P=this.j();try{g.call(T,P.resolve,P.reject)}catch(R){P.reject(R)}},f.prototype.then=function(g,T){function P(et,ut){return typeof et=="function"?function(Ct){try{R(et(Ct))}catch(Ot){Q(Ot)}}:ut}var R,Q,Nt=new f(function(et,ut){R=et,Q=ut});return this.s(P(g,R),P(T,Q)),Nt},f.prototype.catch=function(g){return this.then(void 0,g)},f.prototype.s=function(g,T){function P(){switch(R.h){case 1:g(R.i);break;case 2:T(R.i);break;default:throw Error("Unexpected state: "+R.h)}}var R=this;this.g==null?G.h(P):this.g.push(P),this.o=!0},f.resolve=j,f.reject=function(g){return new f(function(T,P){P(g)})},f.race=function(g){return new f(function(T,P){for(var R=L(g),Q=R.next();!Q.done;Q=R.next())j(Q.value).s(T,P)})},f.all=function(g){var T=L(g),P=T.next();return P.done?j([]):new f(function(R,Q){function Nt(Ct){return function(Ot){et[Ct]=Ot,ut--,ut==0&&R(et)}}var et=[],ut=0;do et.push(void 0),ut++,j(P.value).s(Nt(et.length-1),Q),P=T.next();while(!P.done)})},f});var q=typeof Object.assign=="function"?Object.assign:function(h,f){for(var E=1;E<arguments.length;E++){var j=arguments[E];if(j)for(var I in j)Object.prototype.hasOwnProperty.call(j,I)&&(h[I]=j[I])}return h};v("Object.assign",function(h){return h||q});var jt=this||self,ct={facingMode:"user",width:640,height:480};function V(h,f){this.video=h,this.i=0,this.h=Object.assign(Object.assign({},ct),f)}V.prototype.stop=function(){var h=this,f,E,j,I;return J(new wt(new mt(function(G){if(h.g){for(f=h.g.getTracks(),E=L(f),j=E.next();!j.done;j=E.next())I=j.value,I.stop();h.g=void 0}G.j=0})))},V.prototype.start=function(){var h=this,f;return J(new wt(new mt(function(E){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert("No navigator.mediaDevices.getUserMedia exists."),f=h.h,E.return(navigator.mediaDevices.getUserMedia({video:{facingMode:f.facingMode,width:f.width,height:f.height}}).then(function(j){Ft(h,j)}).catch(function(j){var I="Failed to acquire camera feed: "+j;throw console.error(I),alert(I),j}))})))};function _(h){window.requestAnimationFrame(function(){Rt(h)})}function Ft(h,f){h.g=f,h.video.srcObject=f,h.video.onloadedmetadata=function(){h.video.play(),_(h)}}function Rt(h){var f=null;h.video.paused||h.video.currentTime===h.i||(h.i=h.video.currentTime,f=h.h.onFrame()),f?f.then(function(){_(h)}):_(h)}var st=["Camera"],B=jt;st[0]in B||typeof B.execScript>"u"||B.execScript("var "+st[0]);for(var tt;st.length&&(tt=st.shift());)st.length||V===void 0?B[tt]&&B[tt]!==Object.prototype[tt]?B=B[tt]:B=B[tt]={}:B[tt]=V}).call(Re)),Re}var Xr=Yr();class Vr{constructor(){this.videoElement=document.createElement("video"),this.videoElement.style.display="none",document.body.appendChild(this.videoElement),this.bgCanvas=document.createElement("canvas"),this.bgCanvas.id="ar-background",this.bgCanvas.style.position="fixed",this.bgCanvas.style.top="0",this.bgCanvas.style.left="0",this.bgCanvas.style.width="100%",this.bgCanvas.style.height="100%",this.bgCanvas.style.zIndex="-1",this.bgCanvas.style.objectFit="cover",this.bgCanvas.style.display="none",document.body.appendChild(this.bgCanvas),this.ctx=this.bgCanvas.getContext("2d"),this.onLandmarks=null,this.active=!1,this.hands=new zr.Hands({locateFile:u=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${u}`}),this.hands.setOptions({maxNumHands:1,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),this.hands.onResults(this.onResults.bind(this)),this.camera=new Xr.Camera(this.videoElement,{onFrame:async()=>{this.active&&await this.hands.send({image:this.videoElement})},width:1280,height:720})}start(u){this.active=!0,this.onLandmarks=u,this.bgCanvas.style.display="block",this.camera.start()}stop(){this.active=!1,this.bgCanvas.style.display="none"}onResults(u){const d=this.bgCanvas.width=window.innerWidth,c=this.bgCanvas.height=window.innerHeight;if(this.ctx.save(),this.ctx.clearRect(0,0,d,c),this.ctx.translate(d,0),this.ctx.scale(-1,1),this.ctx.drawImage(u.image,0,0,d,c),this.ctx.restore(),u.multiHandLandmarks&&u.multiHandLandmarks.length>0){let V=function(B,tt){const h=B.y-ct.y,f=B.x-ct.x,E=Math.sqrt(f*f+h*h),j=tt.y-ct.y,I=tt.x-ct.x,G=Math.sqrt(I*I+j*j);return E>G};var v=V;const y=u.multiHandLandmarks[0],L=y[8],O=(1-L.x)*d,U=L.y*c,W=y[4],mt=y[3],ft=y[12],it=y[16],ot=y[20],wt=W.y<mt.y,J=.05,q=W.y<L.y-J&&W.y<ft.y-J&&W.y<it.y-J&&W.y<ot.y-J,jt=wt&&q,ct=y[0],_=V(y[8],y[6]),Ft=V(y[12],y[10]),Rt=V(y[16],y[14]);V(y[20],y[18]);const st=_&&Ft&&Rt;this.onLandmarks&&this.onLandmarks({x:O,y:U,isThumbUp:jt,isOpenHand:st})}}}class Kr{constructor(u,d){this.width=u,this.height=d,this.lamps=[],this.lamplighter={x:-50,targetIndex:0,state:"WALKING",timer:0},this.initLamps(),this.stars=[];for(let c=0;c<50;c++)this.stars.push({x:Math.random()*u,y:Math.random()*d*.6,size:Math.random()*2,alpha:Math.random()})}resize(u,d){this.width=u,this.height=d,this.initLamps(),this.stars.forEach(c=>{c.x=Math.random()*u,c.y=Math.random()*d*.6})}initLamps(){this.lamps=[];const u=4,d=this.width/(u+1);for(let c=1;c<=u;c++)this.lamps.push({x:d*c,y:this.height-50,height:180+Math.random()*20,isLit:!1,glow:0});this.lamplighter.x=-50,this.lamplighter.targetIndex=0,this.lamplighter.state="WALKING"}handleClick(u,d){for(let c=0;c<this.lamps.length;c++){const v=this.lamps[c],y=v.y-v.height;if(u>v.x-30&&u<v.x+30&&d>y-50&&d<y+20&&v.isLit)return v.isLit=!1,v.glow=0,!0}return!1}update(){let u=-1;this.lamps.forEach((c,v)=>{c.isLit&&c.glow<1&&(c.glow+=.05),c.isLit||u===-1&&(u=v)});const d=this.lamplighter;if(u!==-1?(d.targetIndex=u,(d.state==="IDLE"||d.state==="LEAVING")&&(d.state="WALKING",d.x>this.width+50?d.x=this.width+50:d.x<-50&&(d.x=-50))):d.state!=="LIGHTING"&&(d.state="LEAVING"),d.state==="WALKING"||d.state==="LEAVING"){let c;d.state==="LEAVING"?c=this.width+100:c=this.lamps[d.targetIndex].x-20;const v=c-d.x,y=3;Math.abs(v)<y?(d.x=c,d.state==="WALKING"&&(d.state="LIGHTING",d.timer=0)):(d.x+=Math.sign(v)*y,d.direction=Math.sign(v))}else d.state==="LIGHTING"&&(d.timer++,d.timer===30&&this.lamps[d.targetIndex]&&(this.lamps[d.targetIndex].isLit=!0),d.timer>60&&(d.state="WALKING"));this.stars.forEach(c=>{c.alpha+=(Math.random()-.5)*.05,c.alpha<.2&&(c.alpha=.2),c.alpha>.8&&(c.alpha=.8)})}draw(u){u.clearRect(0,0,this.width,this.height);const d=u.createLinearGradient(0,0,0,this.height);d.addColorStop(0,"#0b1026"),d.addColorStop(1,"#2b32b2"),u.fillStyle=d,u.fillRect(0,0,this.width,this.height),u.fillStyle="white",this.stars.forEach(c=>{u.globalAlpha=c.alpha,u.beginPath(),u.arc(c.x,c.y,c.size,0,Math.PI*2),u.fill()}),u.globalAlpha=1,u.fillStyle="#050510",u.fillRect(0,this.height-60,this.width,100),this.lamps.forEach(c=>{this.drawLamp(u,c)}),this.drawWalker(u)}drawLamp(u,d){const c=d.x,v=d.y,y=d.height;u.strokeStyle="#1a1a2e",u.lineWidth=4,u.fillStyle="#000",u.beginPath(),u.moveTo(c,v),u.lineTo(c,v-y),u.stroke(),u.beginPath(),u.moveTo(c,v-y*.5),u.bezierCurveTo(c-10,v-y*.5,c-10,v-y*.4,c,v-y*.4),u.bezierCurveTo(c+10,v-y*.4,c+10,v-y*.5,c,v-y*.5),u.stroke();const L=v-y,O=20,U=35;if(u.fillStyle=d.isLit?`rgba(255, 220, 100, ${.2+d.glow*.5})`:"rgba(200, 200, 255, 0.1)",u.fillRect(c-O/2,L-U,O,U),u.strokeRect(c-O/2,L-U,O,U),u.beginPath(),u.moveTo(c-O/2-5,L-U),u.lineTo(c,L-U-15),u.lineTo(c+O/2+5,L-U),u.fill(),d.isLit){u.save(),u.globalCompositeOperation="lighter";const W=u.createRadialGradient(c,L-U/2,5,c,L-U/2,60);W.addColorStop(0,`rgba(255, 200, 50, ${d.glow})`),W.addColorStop(1,"rgba(255, 100, 0, 0)"),u.fillStyle=W,u.fillRect(c-60,L-U/2-60,120,120),u.restore()}}drawWalker(u){const d=this.lamplighter,c=d.x,v=this.height-60;u.fillStyle="#000",u.beginPath(),u.moveTo(c,v),u.lineTo(c-10,v-40),u.lineTo(c+10,v-40),u.lineTo(c+8,v),u.fill(),u.beginPath(),u.arc(c,v-50,6,0,Math.PI*2),u.fill(),u.beginPath(),u.moveTo(c-7,v-52),u.lineTo(c+8,v-52),u.lineTo(c+5,v-58),u.lineTo(c-5,v-58),u.fill(),u.strokeStyle="#000",u.lineWidth=2,u.beginPath(),d.state==="LIGHTING"?(u.moveTo(c+5,v-40),u.lineTo(c+15,v-70),u.moveTo(c+15,v-65),u.lineTo(c+18,v-180)):(u.moveTo(c+5,v-40),u.lineTo(c+10,v-25),u.moveTo(c+10,v-25),u.lineTo(c-5,v-80)),u.stroke()}}const $t=document.createElement("canvas");$t.id="canvas-bg";document.body.appendChild($t);const Zt=document.createElement("canvas");Zt.id="canvas-stick";document.body.appendChild(Zt);const Qt=document.createElement("canvas");Qt.id="canvas-sparks";document.body.appendChild(Qt);const Yn=$t.getContext("2d"),Ne=Zt.getContext("2d"),Xt=Qt.getContext("2d");let ht,rt;const C=new Br(0,0),Mt=new Hr(window.innerWidth,window.innerHeight),Jt=new Kr(window.innerWidth,window.innerHeight),Ue=new Vr;let Z=!1,Lt=!1,_t="";function Vn(){ht=window.innerWidth,rt=window.innerHeight,$t.width=ht,$t.height=rt,Zt.width=ht,Zt.height=rt,Qt.width=ht,Qt.height=rt,Mt.resize(ht,rt),Jt.resize(ht,rt)}window.addEventListener("resize",Vn);Vn();const Ge=document.createElement("div");Ge.id="ui-overlay";Ge.innerHTML=`
    <div id="instructions">
        <div class="headline" id="main-text"></div>
        <div class="subtext" id="sub-text"></div>
    </div>
    <div id="debug-text"></div>
    <div id="ui-dock">
        <button id="btn-snow" class="dock-button">
            <span class="icon"></span> Snow
        </button>
        <button id="btn-ar" class="dock-button">
            <span class="icon"></span> AR Mode
        </button>
    </div>
`;document.body.appendChild(Ge);const Xn=document.getElementById("btn-snow"),Vt=document.getElementById("btn-ar"),Kt=document.getElementById("main-text"),de=document.getElementById("sub-text"),$r=document.getElementById("debug-text"),gt={x:ht/2,y:rt*.8};window.addEventListener("mousemove",b=>{Z&&Lt||(gt.x=b.clientX,gt.y=b.clientY)});window.addEventListener("touchmove",b=>{Z&&Lt||(b.preventDefault(),gt.x=b.touches[0].clientX,gt.y=b.touches[0].clientY)},{passive:!1});C.x=gt.x;C.y=gt.y;Ue.onLandmarks=b=>{if(Lt=!0,C.state==="IDLE"){const u=b.x-C.x,d=b.y-C.y;C.x+=u*.3,C.y+=d*.3}b.isThumbUp?_t="Thumb Up ":b.isOpenHand?_t="Open Hand ":_t="Holding ",b.isThumbUp&&!C.isLit&&C.state==="IDLE"&&C.ignite(),C.useGhostHand=!1};Xn.addEventListener("click",b=>{b.stopPropagation(),Mt.active=!Mt.active,Xn.classList.toggle("active",Mt.active)});Vt.addEventListener("click",async b=>{if(b.stopPropagation(),Z=!Z,Vt.classList.toggle("active",Z),Z){Kt.textContent="",de.textContent="Loading Camera...",document.body.style.backgroundImage="none";try{await Ue.start(u=>{Lt=!0,C.x=u.x,C.y=u.y,u.isThumbUp&&!C.isLit&&C.ignite(),C.useGhostHand=!1}),Vt.innerHTML='<span class="icon"></span> Disable AR'}catch(u){console.error(u),de.textContent="Camera Failed ",Z=!1,Vt.classList.remove("active")}}else Ue.stop(),Lt=!1,C.useGhostHand=!0,Vt.innerHTML='<span class="icon"></span> AR Mode',_t="",document.body.style.backgroundImage=""});function Kn(){C.isLit||(C.burntLength>=C.length-1?Qr():C.ignite())}document.getElementById("ui-dock");window.addEventListener("mousedown",b=>{b.target.closest(".dock-button")||!Z&&Jt.handleClick(b.clientX,b.clientY)||Kn()});window.addEventListener("touchstart",b=>{if(!b.target.closest(".dock-button")){if(!Z){const u=b.touches[0];if(Jt.handleClick(u.clientX,u.clientY))return}Kn()}},{passive:!1});function Zr(){$r.textContent=Z&&_t?`Gesture: ${_t}`:"";let b="",u="";if(C.state==="PICKING_UP"||C.state==="DROPPING"){Kt.style.opacity="0";return}Kt.style.opacity="1",Z?C.state==="IDLE"&&(C.burntLength>=C.length-1?(b="Tap to Drop ",u="Get a new sparkler"):C.isLit||(b="Thumbs Up ",u="to Light the Sparkler")):C.isLit||(C.burntLength>=C.length-1?(b="New Sparkler? ",u="Tap anywhere"):C.burntLength===0&&(b="Tap to Light! ",u="! / Zapal!")),Kt.textContent!==b&&(Kt.textContent=b),de.textContent!==u&&(de.textContent=u)}function $n(){requestAnimationFrame($n),Z?Yn.clearRect(0,0,ht,rt):(Jt.update(),Jt.draw(Yn)),Ne.clearRect(0,0,ht,rt),Xt.fillStyle="rgba(0, 0, 0, 0.2)",Xt.globalCompositeOperation="destination-out",Xt.fillRect(0,0,ht,rt),Xt.globalCompositeOperation="source-over",C.state==="DROPPING"&&C.y>rt+200&&Jr();let b=gt.x,u=gt.y;Z&&Lt&&(b=C.x,u=C.y),C.update(b,u),Mt.update(),Mt.draw(Ne),C.drawStick(Ne),C.drawSparks(Xt),Zr()}function Qr(){C.drop()}function Jr(){const b=ht/2,u=rt+200;let d=gt.x,c=gt.y;Z&&Lt&&(d=C.x,c=C.y),C.pickup(b,u,d,c)}$n();
